(function(e){function t(t){for(var o,n,s=t[0],r=t[1],m=t[2],c=0,d=[];c<s.length;c++)n=s[c],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&d.push(l[n][0]),l[n]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,m||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],o=!0,s=1;s<a.length;s++){var r=a[s];0!==l[r]&&(o=!1)}o&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var o={},l={app:0},i=[];function n(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=o,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var m=0;m<s.length;m++)t(s[m]);var u=r;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view")],1)},i=[],n={name:"App",methods:{refreshComponent:function(){null==this.$store.state.tokenData?this.$router.push("/login"):this.$router.push("/home")}},mounted:function(){this.refreshComponent()}},s=n,r=a("2877"),m=Object(r["a"])(s,l,i,!1,null,null,null),u=m.exports,c=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-aside",{staticStyle:{width:"20%"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:18}},[a("h2",[e._v("非常小说网后台")])])],1),a("el-menu",[e._l(e.menus,(function(t,o){return a("el-menu-item",{key:o,attrs:{index:o+""},on:{click:function(a){return e.$router.push(t.url)}}},[a("i",{class:t.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])})),a("el-menu-item",{on:{click:e.logout}},[a("i",{staticClass:"el-icon-close"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("退出")])])],2)],1),a("el-main",[a("router-view")],1)],1)],1)},p=[],f={name:"Home",data:function(){return{menus:[{name:"分类管理",icon:"el-icon-menu",url:"/home/categoryManagement"},{name:"小说管理",icon:"el-icon-reading",url:"/home/novelManagement"}]}},methods:{logout:function(){this.$store.state.tokenData=null,this.$store.state.user=null,this.$router.push("/")}}},h=f,g=Object(r["a"])(h,d,p,!1,null,null,null),v=g.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all"},[a("el-row",[a("el-col",{attrs:{span:8,offset:8}},[a("div",{staticStyle:{"font-size":"30px","font-weight":"700","text-align":"center","margin-bottom":"10px"}},[e._v(" 小说后台管理系统 ")]),a("el-form",{ref:"form",attrs:{model:e.formDataOfLogin,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{model:{value:e.formDataOfLogin.username,callback:function(t){e.$set(e.formDataOfLogin,"username",t)},expression:"formDataOfLogin.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formDataOfLogin.password,callback:function(t){e.$set(e.formDataOfLogin,"password",t)},expression:"formDataOfLogin.password"}})],1),a("el-form-item",[a("el-button",{on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1)},y=[],C=(a("d3b7"),a("bc3a")),_=a.n(C);function O(e){return new Promise((function(t,a){var o=_.a.create({baseURL:"http://localhost:9090",timeout:5e3});o(e).then((function(e){t(e)}))["catch"]((function(e){a(e)}))}))}var w=a("2f62");o["default"].use(w["a"]);var D=new w["a"].Store({state:{tokenData:null,user:null},mutations:{},actions:{},modules:{}}),V=a("5c96"),k=a.n(V);function N(e){return new Promise((function(t,a){var o=_.a.create({baseURL:"http://localhost:9090",timeout:5e3});o.interceptors.request.use((function(e){return e.headers.authorization="bearer "+D.state.tokenData.access_token,e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return 400===e.response.status||401===e.response.status||403===e.response.status?(console.log(11),Object(V["Message"])({showClose:!0,message:e.response.data.message,type:"error"})):Object(V["Message"])({showClose:!0,message:e,type:"error"}),Promise.reject(e)})),o(e).then((function(e){t(e)}))["catch"]((function(e){a(e)}))}))}var S={name:"Login",data:function(){return{formDataOfLogin:{username:null,password:null}}},methods:{login:function(){var e=this;O({url:"oauth/token",method:"POST",headers:{Authorization:"Basic dnVlOjEyMzQ1Ng=="},params:{username:this.$data.formDataOfLogin.username,password:this.$data.formDataOfLogin.password,grant_type:"password",scope:"vue_scope"}}).then((function(t){D.state.tokenData=t.data,e.getUser()}))["catch"]((function(t){e.$message({showClose:!0,message:t,type:"error"})}))},getUser:function(){var e=this;N({url:"api/me",method:"GET"}).then((function(t){D.state.user=t.data.data,e.$router.push("/")}))}}},x=S,$=(a("fecf"),Object(r["a"])(x,b,y,!1,null,"132e9ce2",null)),T=$.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",[a("h3",[a("el-breadcrumb-item",{attrs:{to:{path:"/home/categoryManagement"}}},[e._v("分类管理")]),a("el-breadcrumb-item",[e._v(e._s(e.name))])],1)]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formData}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"二级分类名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.postCategorySecond}},[e._v("新增")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.categorySecondList}},[a("el-table-column",{staticStyle:{width:"33%"},attrs:{prop:"id",label:"二级分类的id"}}),a("el-table-column",{staticStyle:{width:"33%"},attrs:{prop:"name",label:"二级分类的name"}}),a("el-table-column",{staticStyle:{width:"34%"},attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){e.dialogVisible=!0,e.dialogCategoryId=t.row.id,e.dialogCategoryName=t.row.name}}},[e._v("编辑")])]}}])})],1),a("el-dialog",{attrs:{title:"请输入新的分类名称",visible:e.dialogVisible,width:"21%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"新的分类名称"},model:{value:e.dialogCategoryName,callback:function(t){e.dialogCategoryName=t},expression:"dialogCategoryName"}})],1),a("el-form-item",[a("el-button",{on:{click:e.putCategoryFirst}},[e._v("确定")])],1)],1)],1)],1)},L=[],P=(a("b0c0"),{name:"CategoryFirst",data:function(){return{id:this.$route.query.id,name:null,categorySecondList:null,formData:{name:null},dialogVisible:!1,dialogCategoryId:null,dialogCategoryName:null}},methods:{refreshComponent:function(){var e=this;N({url:"/api/category/"+this.id,method:"GET"}).then((function(t){e.name=t.data.data.name})),this.getCategorySeconds()},getCategorySeconds:function(){var e=this;N({url:"/api/category",method:"GET",params:{rank:2,parent_id:this.id}}).then((function(t){e.categorySecondList=t.data.data}))},postCategorySecond:function(){var e=this;N({url:"/api/category",method:"POST",data:{rank:2,parent_id:this.id,name:this.formData.name}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))},putCategoryFirst:function(){var e=this;this.dialogVisible=!1,N({url:"/api/category/"+this.dialogCategoryId,method:"PUT",data:{name:this.dialogCategoryName}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))}},mounted:function(){this.refreshComponent()}}),M=P,A=Object(r["a"])(M,E,L,!1,null,null,null),j=A.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",[a("h3",[a("el-breadcrumb-item",[e._v("分类管理")])],1)]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"新分类名"},model:{value:e.newCategoryName,callback:function(t){e.newCategoryName=t},expression:"newCategoryName"}})],1),a("el-form-item",[a("el-button",{on:{click:e.postCategoryFirst}},[e._v("新增")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.categoryFirstList}},[a("el-table-column",{staticStyle:{width:"33%"},attrs:{prop:"id",label:"一级分类的id"}}),a("el-table-column",{staticStyle:{width:"33%"},attrs:{prop:"name",label:"一级分类的name"}}),a("el-table-column",{staticStyle:{width:"34%"},attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.$router.push({path:"/home/categoryFirst",query:{id:t.row.id}})}}},[e._v("查看")]),a("el-button",{on:{click:function(a){e.dialogVisible=!0,e.dialogCategoryId=t.row.id,e.dialogCategoryName=t.row.name}}},[e._v("编辑")])]}}])})],1),a("el-dialog",{attrs:{title:"请输入新的分类名称",visible:e.dialogVisible,width:"21%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"新的分类名称"},model:{value:e.dialogCategoryName,callback:function(t){e.dialogCategoryName=t},expression:"dialogCategoryName"}})],1),a("el-form-item",[a("el-button",{on:{click:e.putCategoryFirst}},[e._v("确定")])],1)],1)],1)],1)},G=[],F={name:"CategoryManagement",data:function(){return{categoryFirstList:null,newCategoryName:null,dialogVisible:!1,dialogCategoryId:null,dialogCategoryName:null}},methods:{refreshComponent:function(){this.getCategoryFirsts()},getCategoryFirsts:function(){var e=this;N({url:"/api/category",method:"GET",params:{rank:1,parent_id:0}}).then((function(t){e.categoryFirstList=t.data.data}))},postCategoryFirst:function(){var e=this;N({url:"/api/category",method:"POST",data:{rank:1,parent_id:0,name:this.newCategoryName}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))},putCategoryFirst:function(){var e=this;this.dialogVisible=!1,N({url:"/api/category/"+this.dialogCategoryId,method:"PUT",data:{name:this.dialogCategoryName}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))}},mounted:function(){this.refreshComponent()}},R=F,q=Object(r["a"])(R,I,G,!1,null,null,null),z=q.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",[a("h3",[a("el-breadcrumb-item",{attrs:{to:{path:"/home/novelManagement"}}},[e._v("小说管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/home/novel",query:{id:e.novel.id}}}},[e._v(e._s(e.novel.name))]),a("el-breadcrumb-item",{attrs:{to:{path:"/home/volume",query:{id:e.volume.id}}}},[e._v(e._s(e.volume.name))]),a("el-breadcrumb-item",[e._v(e._s(e.chapter.title))])],1)]),a("el-divider",[e._v("章节管理")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleOfContent=!0,e.dialogDataOfContent=e.chapterContent}}},[e._v("修改章节")]),a("el-divider",[e._v("章节信息")]),a("el-input",{attrs:{type:"textarea",readonly:"",autosize:!0},model:{value:e.chapterContent,callback:function(t){e.chapterContent=t},expression:"chapterContent"}}),a("el-dialog",{attrs:{title:"请输入新的summary",visible:e.dialogVisibleOfContent,width:"60%"},on:{"update:visible":function(t){e.dialogVisibleOfContent=t}}},[a("el-form",[a("el-form-item",[a("el-input",{attrs:{type:"textarea",placeholder:"章节的内容",autosize:{minRows:15}},model:{value:e.dialogDataOfContent,callback:function(t){e.dialogDataOfContent=t},expression:"dialogDataOfContent"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchChapterContent}},[e._v("确定")])],1)],1)],1)],1)},U=[],J={name:"Chapter",data:function(){return{id:this.$route.query.id,chapter:null,volume:null,novel:null,chapterContent:null,dialogVisibleOfContent:!1,dialogDataOfContent:null}},methods:{refreshComponent:function(){this.getChapter()},getChapter:function(){var e=this;N({url:"/api/chapter/"+this.id,method:"GET"}).then((function(t){e.chapter=t.data.data,e.getVolume(),e.getChapterContent()}))},getVolume:function(){var e=this;N({url:"/api/volume/"+this.chapter.volume_id,method:"GET"}).then((function(t){e.volume=t.data.data,e.getNovel()}))},getNovel:function(){var e=this;N({url:"/api/novel/"+this.volume.novel_id,method:"GET"}).then((function(t){e.novel=t.data.data}))},getChapterContent:function(){var e=this;N({url:"/api/chapter/content",method:"GET",params:{content:this.chapter.content}}).then((function(t){e.chapterContent=t.data.data}))},patchChapterContent:function(){var e=this;this.dialogVisibleOfContent=!1,N({url:"/api/chapter/content",method:"PATCH",params:{content:this.chapter.content},data:{chapterContent:this.dialogDataOfContent}}).then((function(t){e.chapterContent=t.data.data,e.$message({showClose:!0,message:t.data.message,type:"success"})}))}},mounted:function(){this.refreshComponent()}},B=J,Q=Object(r["a"])(B,H,U,!1,null,null,null),W=Q.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",[a("h3",[a("el-breadcrumb-item",{attrs:{to:{path:"/home/novelManagement"}}},[e._v("小说管理")]),a("el-breadcrumb-item",[e._v(e._s(e.novel.name))])],1)]),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-image",{attrs:{src:"http://localhost:9090/images/"+e.novel.image,fit:"fill"}})],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfImage=!0}}},[e._v("修改封面")])],1)],1)],1),a("el-col",{attrs:{span:14}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("h2",[e._v("小说名称："+e._s(e.novel.name))])]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfName=!0,e.dialogDataOfName=e.novel.name}}},[e._v("修改小说名")])],1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[e._v("小说概述："+e._s(e.novel.summary))]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfSummary=!0,e.dialogDataOfSummary=e.novel.summary}}},[e._v("修改")])],1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[e._v("小说分类："+e._s(e.parentCategoryName)+"-"+e._s(e.categoryName))]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfCategory_id=!0}}},[e._v("修改")])],1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[e._v("推荐系数："+e._s(e.novel.multiplier))]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfMultiplier=!0,e.dialogDataOfMultiplier=e.novel.multiplier}}},[e._v("修改")])],1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[e._v("推荐常数："+e._s(e.novel.addend))]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfAddend=!0,e.dialogDataOfAddend=e.novel.addend}}},[e._v("修改")])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[e.hasRecommended?a("el-button",{on:{click:e.deleteRecommend}},[e._v("取消推荐")]):a("el-button",{attrs:{type:"success"},on:{click:e.postRecommend}},[e._v("推荐")])],1)],1)],1)],1),a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"卷名"}},[a("el-input",{attrs:{placeholder:"卷名"},model:{value:e.newVolumeName,callback:function(t){e.newVolumeName=t},expression:"newVolumeName"}})],1),a("el-form-item",{attrs:{label:"概述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"概述"},model:{value:e.newVolumeSummary,callback:function(t){e.newVolumeSummary=t},expression:"newVolumeSummary"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.postVolume}},[e._v("立即创建")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.volumeList}},[a("el-table-column",{staticStyle:{width:"33%"},attrs:{prop:"id",label:"卷的id"}}),a("el-table-column",{staticStyle:{width:"33%"},attrs:{prop:"name",label:"卷的name"}}),a("el-table-column",{staticStyle:{width:"34%"},attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.$router.push({path:"/home/volume",query:{id:t.row.id}})}}},[e._v("查看")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.dialogVisibleOfNameOfVolume=!0,e.dialogDataOfIdOfVolume=t.row.id,e.dialogDataOfNameOfVolume=t.row.name}}},[e._v("编辑")])]}}])})],1),a("el-dialog",{attrs:{title:"请输入新的image",visible:e.dialogVisibleOfImage,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfImage=t}}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:9090/api/novel/image",headers:{authorization:"bearer "+e.$store.state.tokenData.access_token},limit:1,"file-list":e.dialogDataOfImageList,"on-success":e.postImageSuccess,"on-error":e.postImageError}},[a("el-button",[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传png文件")])],1)],1),a("el-dialog",{attrs:{title:"请输入新的name",visible:e.dialogVisibleOfName,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfName=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{model:{value:e.dialogDataOfName,callback:function(t){e.dialogDataOfName=t},expression:"dialogDataOfName"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchName}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的summary",visible:e.dialogVisibleOfSummary,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfSummary=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogDataOfSummary,callback:function(t){e.dialogDataOfSummary=t},expression:"dialogDataOfSummary"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchSummary}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的category_id",visible:e.dialogVisibleOfCategory_id,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfCategory_id=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{props:e.props},model:{value:e.dialogDataOfCategory_ids,callback:function(t){e.dialogDataOfCategory_ids=t},expression:"dialogDataOfCategory_ids"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchCategory_id}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的multiplier",visible:e.dialogVisibleOfMultiplier,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfMultiplier=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{type:"number"},model:{value:e.dialogDataOfMultiplier,callback:function(t){e.dialogDataOfMultiplier=t},expression:"dialogDataOfMultiplier"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchMultiplier}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的addend",visible:e.dialogVisibleOfAddend,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfAddend=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{type:"number"},model:{value:e.dialogDataOfAddend,callback:function(t){e.dialogDataOfAddend=t},expression:"dialogDataOfAddend"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchAddend}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的卷的name",visible:e.dialogVisibleOfNameOfVolume,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfNameOfVolume=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{model:{value:e.dialogDataOfNameOfVolume,callback:function(t){e.dialogDataOfNameOfVolume=t},expression:"dialogDataOfNameOfVolume"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchNameOfVolume}},[e._v("确定")])],1)],1)],1)],1)},X=[],Y=(a("d81d"),{name:"Novel",data:function(){return{id:this.$route.query.id,novel:null,parentCategoryName:null,categoryName:null,category_ids:null,props:{lazy:!0,lazyLoad:function(e,t){var a=1,o=0;0!==e.level&&(a=2,o=e.value),N({url:"/api/category",method:"GET",params:{rank:a,parent_id:o}}).then((function(e){var a=e.data.data.map((function(e){return{value:e.id,label:e.name,leaf:2===e.rank}}));t(a)}))}},newVolumeName:null,newVolumeSummary:null,volumeList:null,dialogVisibleOfImage:!1,dialogDataOfImageList:null,dialogVisibleOfName:!1,dialogDataOfName:null,dialogVisibleOfSummary:!1,dialogDataOfSummary:null,dialogVisibleOfCategory_id:!1,dialogDataOfCategory_ids:null,dialogVisibleOfMultiplier:!1,dialogDataOfMultiplier:null,dialogVisibleOfAddend:!1,dialogDataOfAddend:null,dialogVisibleOfNameOfVolume:!1,dialogDataOfIdOfVolume:null,dialogDataOfNameOfVolume:null,hasRecommended:!1}},methods:{refreshComponent:function(){this.getNovel(),this.getRecommend()},getNovel:function(){var e=this;N({url:"/api/novel/"+this.id,method:"GET"}).then((function(t){e.novel=t.data.data,e.getParentCategoryNameAndCategoryName(),e.getVolume()}))},getParentCategoryNameAndCategoryName:function(){var e=this;N({url:"/api/category/"+this.novel.category_id,method:"GET"}).then((function(t){e.categoryName=t.data.data.name,N({url:"/api/category/"+t.data.data.parent_id,method:"GET"}).then((function(t){e.parentCategoryName=t.data.data.name}))}))},getVolume:function(){var e=this;N({url:"/api/volume",method:"GET",params:{novel_id:this.id}}).then((function(t){e.volumeList=t.data.data}))},postVolume:function(){var e=this;N({url:"/api/volume",method:"POST",data:{novel_id:this.id,name:this.newVolumeName,summary:this.newVolumeSummary}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.getNovel()}))},postImageSuccess:function(e){var t=this;this.$message({showClose:!0,message:"上传成功",type:"success"}),N({url:"/api/novel/image",method:"PATCH",data:{image:e.data,novel_id:this.id}}).then((function(e){t.$message({showClose:!0,message:e.data.message,type:"success"}),t.refreshComponent()}))},postImageError:function(){this.$message({showClose:!0,message:"上传失败，请稍后再试",type:"error"})},patchName:function(){var e=this;this.dialogVisibleOfName=!1,N({url:"/api/novel/"+this.id,method:"PATCH",data:{name:this.dialogDataOfName}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))},patchSummary:function(){var e=this;this.dialogVisibleOfSummary=!1,N({url:"/api/novel/"+this.id,method:"PATCH",data:{summary:this.dialogDataOfSummary}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))},patchCategory_id:function(){var e=this;this.dialogVisibleOfCategory_id=!1,null!=this.dialogDataOfCategory_ids?N({url:"/api/novel/"+this.id,method:"PATCH",data:{category_id:this.dialogDataOfCategory_ids[1]}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()})):this.$message("小说类型不可为null")},patchMultiplier:function(){var e=this;this.dialogVisibleOfMultiplier=!1,N({url:"/api/novel/"+this.id,method:"PATCH",data:{multiplier:this.dialogDataOfMultiplier}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))},patchAddend:function(){var e=this;this.dialogVisibleOfAddend=!1,N({url:"/api/novel/"+this.id,method:"PATCH",data:{addend:this.dialogDataOfAddend}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))},patchNameOfVolume:function(){var e=this;this.dialogVisibleOfNameOfVolume=!1,N({url:"/api/volume/"+this.dialogDataOfIdOfVolume,method:"PATCH",data:{name:this.dialogDataOfNameOfVolume}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.refreshComponent()}))},postRecommend:function(){var e=this;N({url:"/api/recommend",method:"POST",data:{novel_id:this.id}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.getRecommend()}))},deleteRecommend:function(){var e=this;N({url:"/api/recommend",method:"DELETE",params:{novel_id:this.id,user_id:this.$store.state.user.id}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.getRecommend()}))},getRecommend:function(){var e=this;N({url:"/api/recommend",method:"GET",params:{novel_id:this.id,user_id:this.$store.state.user.id}}).then((function(t){null==t.data.data?e.hasRecommended=!1:e.hasRecommended=!0}))}},mounted:function(){this.refreshComponent()}}),Z=Y,ee=Object(r["a"])(Z,K,X,!1,null,null,null),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",[a("h3",[a("el-breadcrumb-item",[e._v("小说管理")])],1)]),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"小说新增",name:"insert"}},[a("el-row",[a("el-col",{attrs:{span:16,offset:4}},[a("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"小说名称"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"小说类型"}},[a("el-cascader",{attrs:{props:e.props},model:{value:e.formData.category_ids,callback:function(t){e.$set(e.formData,"category_ids",t)},expression:"formData.category_ids"}})],1),a("el-form-item",{attrs:{label:"是否已完结"}},[a("el-switch",{model:{value:e.formData.is_complete,callback:function(t){e.$set(e.formData,"is_complete",t)},expression:"formData.is_complete"}})],1),a("el-form-item",{attrs:{label:"小说概述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.summary,callback:function(t){e.$set(e.formData,"summary",t)},expression:"formData.summary"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.postNovel}},[e._v("新增小说")])],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"小说查询",name:"select"}},[a("el-row",[a("el-col",{attrs:{span:16,offset:4}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"小说类型"}},[a("el-cascader",{attrs:{props:e.props},model:{value:e.category_ids,callback:function(t){e.category_ids=t},expression:"category_ids"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getNovel}},[e._v("查询")])],1)],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.novelList}},[a("el-table-column",{staticStyle:{width:"25%"},attrs:{prop:"id",label:"小说id"}}),a("el-table-column",{staticStyle:{width:"25%"},attrs:{prop:"name",label:"小说名称"}}),a("el-table-column",{staticStyle:{width:"25%"},attrs:{prop:"summary",label:"小说概述"}}),a("el-table-column",{staticStyle:{width:"25%"},attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.$router.push({path:"/home/novel",query:{id:t.row.id}})}}},[e._v("查看")])]}}])})],1)],1)],1)],1)},oe=[],le={name:"NovelManagement",data:function(){return{categoryFirstList:null,formData:{name:null,category_ids:null,is_complete:!1,summary:null},category_ids:null,novelList:null,props:{lazy:!0,lazyLoad:function(e,t){var a=1,o=0;0!==e.level&&(a=2,o=e.value),N({url:"/api/category",method:"GET",params:{rank:a,parent_id:o}}).then((function(e){var a=e.data.data.map((function(e){return{value:e.id,label:e.name,leaf:2===e.rank}}));t(a)}))}},activeName:"insert"}},methods:{refreshComponent:function(){this.getCategoryFirsts()},getCategoryFirsts:function(){var e=this;N({url:"/api/category",method:"GET",params:{rank:1,parent_id:0}}).then((function(t){e.categoryFirstList=t.data.data}))},postNovel:function(){var e=this;null!=this.formData.category_ids?N({url:"/api/novel",method:"POST",data:{user_id:this.$store.state.user.id,category_id:this.formData.category_ids[1],name:this.formData.name,summary:this.formData.summary,image:"default_novel_image.png",is_complete:this.formData.is_complete}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"})})):this.$message("小说类型不可为null")},getNovel:function(){var e=this;null!=this.category_ids?N({url:"/api/novel",method:"GET",params:{category_id:this.category_ids[1]}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.novelList=t.data.data})):this.$message({showClose:!0,message:"小说类型不可为null",type:"error"})}},mounted:function(){this.refreshComponent()}},ie=le,ne=Object(r["a"])(ie,ae,oe,!1,null,null,null),se=ne.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",[a("h3",[a("el-breadcrumb-item",{attrs:{to:{path:"/home/novelManagement"}}},[e._v("小说管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/home/novel",query:{id:e.novel.id}}}},[e._v(e._s(e.novel.name))]),a("el-breadcrumb-item",[e._v(e._s(e.volume.name))])],1)]),a("el-divider",[e._v(" 卷信息")]),a("el-row",[a("el-col",{attrs:{span:16}},[e._v("卷名称: "+e._s(e.volume.name))]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfName=!0,e.dialogDataOfName=e.volume.name}}},[e._v("修改")])],1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[e._v("卷摘要: "+e._s(e.volume.summary))]),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisibleOfSummary=!0,e.dialogDataOfSummary=e.volume.summary}}},[e._v("修改")])],1)],1),a("el-divider",[e._v(" 卷章节")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.newChapterVisible=!0}}},[e._v("添加章节")]),a("el-divider",[e._v(" 章节列表")]),e._l(e.chapterList,(function(t,o){return a("el-row",{key:o},[a("el-col",{attrs:{span:12}},[e._v(e._s(t.title))]),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.$router.push({path:"/home/chapter",query:{id:t.id}})}}},[e._v("查看")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.updateChapterNameDialog=!0,e.chapterId=t.id,e.chapterTitle=t.title}}},[e._v("修改")])],1)],1)})),a("el-dialog",{attrs:{title:"请输入新的 章节名称",visible:e.updateChapterNameDialog,width:"21%"},on:{"update:visible":function(t){e.updateChapterNameDialog=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{model:{value:e.chapterTitle,callback:function(t){e.chapterTitle=t},expression:"chapterTitle"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateChapterName(e.chapterId,e.chapterTitle)}}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的name",visible:e.dialogVisibleOfName,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfName=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{model:{value:e.dialogDataOfName,callback:function(t){e.dialogDataOfName=t},expression:"dialogDataOfName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.patchName}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的summary",visible:e.dialogVisibleOfSummary,width:"21%"},on:{"update:visible":function(t){e.dialogVisibleOfSummary=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogDataOfSummary,callback:function(t){e.dialogDataOfSummary=t},expression:"dialogDataOfSummary"}})],1),a("el-form-item",[a("el-button",{on:{click:e.patchSummary}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"请输入新的chapter",visible:e.newChapterVisible,width:"60%"},on:{"update:visible":function(t){e.newChapterVisible=t}}},[a("el-form",[a("el-form-item",[a("el-input",{attrs:{placeholder:"章节的标题"},model:{value:e.newChapterTitle,callback:function(t){e.newChapterTitle=t},expression:"newChapterTitle"}})],1),a("el-form-item",[a("el-input",{attrs:{type:"textarea",placeholder:"章节的内容",autosize:{minRows:15}},model:{value:e.newChapterContent,callback:function(t){e.newChapterContent=t},expression:"newChapterContent"}})],1),a("el-form-item",[a("el-button",{on:{click:e.postChapter}},[e._v("确定")])],1)],1)],1)],2)},me=[],ue={name:"Volume",data:function(){return{id:this.$route.query.id,volume:null,novel:null,chapterList:null,dialogVisibleOfName:!1,dialogDataOfName:null,dialogVisibleOfSummary:!1,dialogDataOfSummary:null,newChapterVisible:!1,newChapterTitle:null,newChapterContent:null,updateChapterNameDialog:!1,chapterId:null,chapterTitle:null}},methods:{refreshComponent:function(){this.getVolume()},getVolume:function(){var e=this;N({url:"/api/volume/"+this.id,method:"GET"}).then((function(t){e.volume=t.data.data,e.getNovel(),e.getChapter()}))},getNovel:function(){var e=this;N({url:"/api/novel/"+this.volume.novel_id,method:"GET"}).then((function(t){e.novel=t.data.data}))},postChapter:function(){var e=this;this.newChapterVisible=!1,N({url:"/api/chapter",method:"POST",data:{volume_id:this.id,title:this.newChapterTitle,chapterContent:this.newChapterContent}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.getVolume()}))},getChapter:function(){var e=this;N({url:"/api/chapter",method:"GET",params:{volume_id:this.id}}).then((function(t){e.chapterList=t.data.data}))},updateChapterName:function(e,t){this.updateChapterNameDialog=!1,console.log(e),console.log(t)},patchName:function(){var e=this;this.dialogVisibleOfName=!1,N({url:"/api/volume/"+this.id,method:"PATCH",data:{name:this.dialogDataOfName}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.getVolume()}))},patchSummary:function(){var e=this;this.dialogVisibleOfSummary=!1,N({url:"/api/volume/"+this.id,method:"PATCH",data:{summary:this.dialogDataOfSummary}}).then((function(t){e.$message({showClose:!0,message:t.data.message,type:"success"}),e.getVolume()}))}},mounted:function(){this.refreshComponent()}},ce=ue,de=Object(r["a"])(ce,re,me,!1,null,null,null),pe=de.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",[e._v("欢迎登陆小说管理系统")])},he=[],ge={name:"Welcome"},ve=ge,be=Object(r["a"])(ve,fe,he,!1,null,"b287084c",null),ye=be.exports;o["default"].use(c["a"]);var Ce=[{path:"/",redirect:"/app"},{path:"/app",component:u},{path:"/home",component:v,redirect:"/home/welcome",children:[{path:"welcome",component:ye},{path:"categoryFirst",component:j},{path:"categoryManagement",component:z},{path:"chapter",component:W},{path:"novel",component:te},{path:"novelManagement",component:se},{path:"volume",component:pe}]},{path:"/login",component:T}],_e=new c["a"]({mode:"history",base:"/",routes:Ce}),Oe=_e;a("0fae");o["default"].config.productionTip=!1,o["default"].use(k.a),new o["default"]({router:Oe,store:D,render:function(e){return e(u)}}).$mount("#app")},"8d79":function(e,t,a){},fecf:function(e,t,a){"use strict";var o=a("8d79"),l=a.n(o);l.a}});
//# sourceMappingURL=app.0dea74ba.js.map